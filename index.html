<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sales Discovery Call Form</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: auto;
      background-color: #fff;
      padding: 30px 40px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    }

    h2 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 30px;
    }

    fieldset {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 25px;
    }

    legend {
      font-weight: bold;
      font-size: 1.1em;
      color: #2c3e50;
      padding: 0 10px;
    }

    .form-row {
      display: grid;
      grid-template-columns: 200px 1fr;
      align-items: center;
      gap: 10px 20px;
      margin-bottom: 20px;
    }

    .form-row label {
      font-weight: 500;
    }

    .form-row input,
    .form-row textarea,
    .form-row select {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1em;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      width: 100%;
    }

    textarea {
      resize: vertical;
      white-space: pre-line;
    }

    .radio-group {
      display: flex;
      gap: 20px;
    }

    button {
      background-color: #2c3e50;
      color: white;
      padding: 12px 25px;
      font-size: 1em;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      display: block;
      margin: 20px auto 0;
    }

    button:hover {
      background-color: #1a242f;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Sales Discovery Call Form</h2>
    <form id="myForm">
      <fieldset>
        <legend>Client Information</legend>
        <div class="form-row">
          <label for="company_name">Company Name:</label>
          <input type="text" id="company_name" name="company_name" />
        </div>
        <div class="form-row">
          <label for="industry">Industry:</label>
          <input type="text" id="industry" name="industry" />
        </div>
        <div class="form-row">
          <label for="location">Location:</label>
          <input type="text" id="location" name="location" />
        </div>
        <div class="form-row">
          <label>Priority Level:</label>
          <div class="radio-group">
            <label><input type="radio" name="priority" value="High" /> High</label>
            <label><input type="radio" name="priority" value="Medium" /> Medium</label>
            <label><input type="radio" name="priority" value="Low" /> Low</label>
          </div>
        </div>
      </fieldset>

      <fieldset>
        <legend>Automation Requirements & Details</legend>
        <div class="form-row">
          <label for="automation_goal">Automation Goal:</label>
          <textarea class="bulleted" id="automation_goal" name="automation_goal" rows="3"></textarea>
        </div>
        <div class="form-row">
          <label for="current_workflow_text">Current Workflow:</label>
          <input type="text" id="current_workflow_text" name="current_workflow_text" placeholder="Describe the current process..." />
        </div>
        <div class="form-row">
          <label for="workflow_image">Workflow Image:</label>
          <input type="file" id="workflow_image" name="workflow_image" accept="image/*" />
        </div>
        <div class="form-row">
          <label for="pain_points">Pain Points:</label>
          <textarea class="bulleted" id="pain_points" name="pain_points" rows="3"></textarea>
        </div>
        <div class="form-row">
          <label for="desired_automation">Desired Automation:</label>
          <textarea class="bulleted" id="desired_automation" name="desired_automation" rows="3"></textarea>
        </div>
        <div class="form-row">
          <label for="volume_frequency">Volume/Frequency:</label>
          <input type="text" id="volume_frequency" name="volume_frequency" />
        </div>
      </fieldset>

      <fieldset>
        <legend>Technical Considerations</legend>
        <div class="form-row">
          <label for="existing_apps">Existing Apps/Tools:</label>
          <input type="text" id="existing_apps" name="existing_apps" />
        </div>
        <div class="form-row">
          <label for="preferred_platforms">Preferred Platform:</label>
          <input type="text" id="preferred_platforms" name="preferred_platforms" />
        </div>
      </fieldset>

      <fieldset>
        <legend>Additional Notes</legend>
        <div class="form-row">
          <label for="additional_notes">Notes:</label>
          <textarea id="additional_notes" name="additional_notes" rows="4" placeholder="Write any additional notes here..."></textarea>
        </div>
      </fieldset>

      <fieldset>
        <legend>Submitted By</legend>
        <div class="form-row">
          <label for="sales_exec">Sales Executive:</label>
          <input type="text" id="sales_exec" name="sales_exec" />
        </div>
        <div class="form-row">
          <label for="reference_number">Reference Number:</label>
          <input type="text" id="reference_number" name="reference_number" />
        </div>
        <div class="form-row">
          <label for="submitted_date">Date:</label>
          <input type="date" id="submitted_date" name="submitted_date" />
        </div>
      </fieldset>

      <button type="submit">Submit Form</button>
    </form>
  </div>

  <script>
    // Auto bullets
    document.querySelectorAll('.bulleted').forEach(textarea => {
      textarea.addEventListener('keydown', function (e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          const cursorPos = this.selectionStart;
          const value = this.value;
          const before = value.substring(0, cursorPos);
          const after = value.substring(cursorPos);
          this.value = before + '\n\u2022 ' + after;
          this.selectionStart = this.selectionEnd = cursorPos + 3;
        }
      });
      textarea.addEventListener('focus', function () {
        if (this.value.trim() === '') {
          this.value = '\u2022 ';
        }
      });
    });

    // Lock reference number prefix
    window.addEventListener('DOMContentLoaded', function () {
      const refInput = document.getElementById('reference_number');
      const now = new Date();
      const year = String(now.getFullYear()).slice(2);
      const month = String(now.getMonth() + 1).padStart(2, '0');
      const prefix = `MSQ-${year}${month}-`;
      refInput.value = prefix;

      refInput.addEventListener('keydown', function (e) {
        const cursorPos = this.selectionStart;
        if (cursorPos <= prefix.length || (e.key === 'Backspace' && cursorPos <= prefix.length)) {
          e.preventDefault();
        }
      });
      refInput.addEventListener('paste', e => e.preventDefault());
    });

    // Submit form
    document.getElementById('myForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const form = e.target;
      const data = new FormData(form);

      fetch('https://hook.eu1.make.com/rg3z1xzvpwby5jriaytgooq2dxs8kr1k', {
        method: 'POST',
        body: data
      })
        .then(response => {
          if (response.ok) {
            document.querySelector(".container").innerHTML = `
              <div style="text-align: center; padding: 60px;">
                <h2 style="color: green;">\u2705 Form submitted successfully!</h2>
                <p>Thank you. Your submission has been received.</p>
                <a href="" style="display: inline-block; margin-top: 25px; padding: 12px 24px; background-color: #2c3e50; color: white; border-radius: 8px; text-decoration: none;">
                  Submit Another Response
                </a>
              </div>`;
          } else {
            alert('Error submitting form.');
          }
        })
        .catch(err => {
          alert('Failed to submit form: ' + err.message);
        });
    });
  </script>
</body>
</html>
